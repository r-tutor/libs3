<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Generic Interface for Nonnegative Matrix Factorisation Models</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for NMF-class {NMF}"><tr><td>NMF-class {NMF}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Generic Interface for Nonnegative Matrix Factorisation Models</h2>

<h3>Description</h3>

<p>The class <code>NMF</code> is a <em>virtual class</em> that
defines a common interface to handle Nonnegative Matrix
Factorization models (NMF models) in a generic way.
Provided a minimum set of generic methods is implemented
by concrete model classes, these benefit from a whole set
of functions and utilities to perform common computations
and tasks in the context of Nonnegative Matrix
Factorization.
</p>
<p>The function <code>misc</code> provides access to miscellaneous
data members stored in slot <code>misc</code> (as a
<code>list</code>), which allow extensions of NMF models to be
implemented, without defining a new S4 class.
</p>


<h3>Usage</h3>

<pre>
  misc(object, ...)

  ## S4 method for signature 'NMF'
x$name

  ## S4 replacement method for signature 'NMF'
x$name&lt;-value

  ## S4 method for signature 'NMF'
.DollarNames(x, pattern = "")
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>object</code></td>
<td>
<p>an object that inherit from class
<code>NMF</code></p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>extra arguments (not used)</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
<p> object from which to extract element(s) or in
which to replace element(s).  </p>
</td></tr>
<tr valign="top"><td><code>name</code></td>
<td>
<p> A literal character string or a <a href="Strategy-class.html">name</a>
(possibly <a href="../../base/html/Quotes.html">backtick</a> quoted).  For extraction, this
is normally (see under &lsquo;Environments&rsquo;) partially
matched to the <code><a href="../../base/html/names.html">names</a></code> of the object.  </p>
</td></tr>
<tr valign="top"><td><code>value</code></td>
<td>
<p>typically an array-like <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> object of a
similar class as <code>x</code>.</p>
</td></tr>
<tr valign="top"><td><code>pattern</code></td>
<td>
<p> A regular expression.  Only matching
names are returned.  </p>
</td></tr>
</table>


<h3>Details</h3>

<p>Class <code>NMF</code> makes it easy to develop new models that
integrate well into the general framework implemented by
the <em>NMF</em> package.
</p>
<p>Following a few simple guidelines, new types of NMF
models benefit from all the functionalities available for
the built-in NMF models &ndash; that derive themselves from
class <code>NMF</code>. See section <em>Implementing NMF
models</em> below.
</p>
<p>See <code><a href="NMFstd-class.html">NMFstd</a></code>, and references and links
therein for details on the built-in implementations of
the standard NMF model and its extensions.
</p>


<h3>Slots</h3>


<dl>
<dt>misc</dt><dd><p>A list that is used internally to temporarily
store algorithm parameters during the computation.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>[</dt><dd><p><code>signature(x = "NMF")</code>: This method
provides a convenient way of sub-setting objects of class
<code>NMF</code>, using a matrix-like syntax.
</p>
<p>It allows to consistently subset one or both matrix
factors in the NMF model, as well as retrieving part of
the basis components or part of the mixture coefficients
with a reduced amount of code.
</p>
<p>See <code><a href="subset-NMF.html">[,NMF-method</a></code> for more details. </p>
</dd>
<dt>$</dt><dd><p><code>signature(x = "NMF")</code>: shortcut for
<code>x@misc[[name, exact=TRUE]]</code> respectively. </p>
</dd>
<dt>$</dt><dd><p><code>signature(x = "NMF")</code>: shortcut for
<code>x@misc[[name, exact=TRUE]]</code> respectively. </p>
</dd>
<dt>$&lt;-</dt><dd><p><code>signature(x = "NMF")</code>: shortcut for
<code>x@misc[[name]] &lt;- value</code> </p>
</dd>
<dt>$&lt;-</dt><dd><p><code>signature(x = "NMF")</code>: shortcut for
<code>x@misc[[name]] &lt;- value</code> </p>
</dd>
<dt>.basis</dt><dd><p><code>signature(object = "NMF")</code>: Pure
virtual method for objects of class
<code><a href="NMF-class.html">NMF</a></code>, that should be overloaded by
sub-classes, and throws an error if called. </p>
</dd>
<dt>.basis&lt;-</dt><dd><p><code>signature(object = "NMF", value =
  "matrix")</code>: Pure virtual method for objects of class
<code><a href="NMF-class.html">NMF</a></code>, that should be overloaded by
sub-classes, and throws an error if called. </p>
</dd>
<dt>basis&lt;-</dt><dd><p><code>signature(object = "NMF")</code>: Default
methods that calls <code>.basis&lt;-</code> and check the validity
of the updated object. </p>
</dd>
<dt>basiscor</dt><dd><p><code>signature(x = "NMF", y =
  "matrix")</code>: Computes the correlations between the basis
vectors of <code>x</code> and the columns of <code>y</code>. </p>
</dd>
<dt>basiscor</dt><dd><p><code>signature(x = "NMF", y = "NMF")</code>:
Computes the correlations between the basis vectors of
<code>x</code> and <code>y</code>. </p>
</dd>
<dt>basiscor</dt><dd><p><code>signature(x = "NMF", y =
  "missing")</code>: Computes the correlations between the basis
vectors of <code>x</code>. </p>
</dd>
<dt>basismap</dt><dd><p><code>signature(object = "NMF")</code>: Plots a
heatmap of the basis matrix of the NMF model
<code>object</code>. This method also works for fitted NMF
models (i.e. <code>NMFfit</code> objects). </p>
</dd>
<dt>c</dt><dd><p><code>signature(x = "NMF")</code>: Binds compatible
matrices and NMF models together. </p>
</dd>
<dt>.coef</dt><dd><p><code>signature(object = "NMF")</code>: Pure
virtual method for objects of class
<code><a href="NMF-class.html">NMF</a></code>, that should be overloaded by
sub-classes, and throws an error if called. </p>
</dd>
<dt>.coef&lt;-</dt><dd><p><code>signature(object = "NMF", value =
  "matrix")</code>: Pure virtual method for objects of class
<code><a href="NMF-class.html">NMF</a></code>, that should be overloaded by
sub-classes, and throws an error if called. </p>
</dd>
<dt>coef&lt;-</dt><dd><p><code>signature(object = "NMF")</code>: Default
methods that calls <code>.coef&lt;-</code> and check the validity
of the updated object. </p>
</dd>
<dt>coefficients</dt><dd><p><code>signature(object = "NMF")</code>:
Alias to <code>coef,NMF</code>, therefore also pure virtual. </p>
</dd>
<dt>coefmap</dt><dd><p><code>signature(object = "NMF")</code>: The
default method for NMF objects has special default values
for some arguments of <code><a href="aheatmap.html">aheatmap</a></code> (see
argument description). </p>
</dd>
<dt>connectivity</dt><dd><p><code>signature(object = "NMF")</code>:
Computes the connectivity matrix for an NMF model, for
which cluster membership is given by the most
contributing basis component in each sample. See
<code><a href="predict.html">predict,NMF-method</a></code>. </p>
</dd>
<dt>consensus</dt><dd><p><code>signature(object = "NMF")</code>: This
method is provided for completeness and is identical to
<code><a href="connectivity.html">connectivity</a></code>, and returns the connectivity
matrix, which, in the case of a single NMF model, is also
the consensus matrix. </p>
</dd>
<dt>consensushc</dt><dd><p><code>signature(object = "NMF")</code>:
Compute the hierarchical clustering on the connectivity
matrix of <code>object</code>. </p>
</dd>
<dt>consensusmap</dt><dd><p><code>signature(object = "NMF")</code>:
Plots a heatmap of the connectivity matrix of an NMF
model. </p>
</dd>
<dt>deviance</dt><dd><p><code>signature(object = "NMF")</code>:
Computes the distance between a matrix and the estimate
of an <code>NMF</code> model. </p>
</dd>
<dt>dim</dt><dd><p><code>signature(x = "NMF")</code>: method for NMF
objects for the base generic <code><a href="../../base/html/dim.html">dim</a></code>. It
returns all dimensions in a length-3 integer vector: the
number of row and columns of the estimated target matrix,
as well as the factorization rank (i.e. the number of
basis components). </p>
</dd>
<dt>dimnames</dt><dd><p><code>signature(x = "NMF")</code>: Returns the
dimension names of the NMF model <code>x</code>.
</p>
<p>It returns either NULL if no dimnames are set on the
object, or a 3-length list containing the row names of
the basis matrix, the column names of the mixture
coefficient matrix, and the column names of the basis
matrix (i.e. the names of the basis components). </p>
</dd>
<dt>dimnames&lt;-</dt><dd><p><code>signature(x = "NMF")</code>: sets the
dimension names of the NMF model <code>x</code>.
</p>
<p><code>value</code> can be <code>NULL</code> which resets all
dimension names, or a 1, 2 or 3-length list providing
names at least for the rows of the basis matrix.
</p>
<p>See <code><a href="../../base/html/dimnames.html">dimnames</a></code> for more details.
</p>
</dd>
<dt>.DollarNames</dt><dd><p><code>signature(x = "NMF")</code>:
Auto-completion for <code><a href="NMF-class.html">NMF</a></code> objects </p>
</dd>
<dt>.DollarNames</dt><dd><p><code>signature(x = "NMF")</code>:
Auto-completion for <code><a href="NMF-class.html">NMF</a></code> objects </p>
</dd>
<dt>extractFeatures</dt><dd><p><code>signature(object = "NMF")</code>:
Select basis-specific features from an NMF model, by
applying the method <code>extractFeatures,matrix</code> to its
basis matrix. </p>
</dd>
<dt>featureScore</dt><dd><p><code>signature(object = "NMF")</code>:
Computes feature scores on the basis matrix of an NMF
model. </p>
</dd>
<dt>fitted</dt><dd><p><code>signature(object = "NMF")</code>: Pure
virtual method for objects of class
<code><a href="NMF-class.html">NMF</a></code>, that should be overloaded by
sub-classes, and throws an error if called. </p>
</dd>
<dt>ibterms</dt><dd><p><code>signature(object = "NMF")</code>: Default
pure virtual method that ensure a method is defined for
concrete NMF model classes. </p>
</dd>
<dt>icterms</dt><dd><p><code>signature(object = "NMF")</code>: Default
pure virtual method that ensure a method is defined for
concrete NMF model classes. </p>
</dd>
<dt>loadings</dt><dd><p><code>signature(x = "NMF")</code>: Method
loadings for NMF Models
</p>
<p>The method <code>loadings</code> is identical to <code>basis</code>,
but do not accept any extra argument.
</p>
<p>See <code><a href="basis-coef-methods.html">loadings,NMF-method</a></code> for more details. </p>
</dd>
<dt>metaHeatmap</dt><dd><p><code>signature(object = "NMF")</code>:
Deprecated method that is substituted by
<code><a href="heatmaps.html">coefmap</a></code> and <code><a href="heatmaps.html">basismap</a></code>. </p>
</dd>
<dt>nmf.equal</dt><dd><p><code>signature(x = "NMF", y = "NMF")</code>:
Compares two NMF models.
</p>
<p>Arguments in <code>...</code> are used only when
<code>identical=FALSE</code> and are passed to
<code>all.equal</code>. </p>
</dd>
<dt>nmf.equal</dt><dd><p><code>signature(x = "NMF", y =
  "NMFfit")</code>: Compares two NMF models when at least one
comes from a NMFfit object, i.e. an object returned by a
single run of <code><a href="nmf.html">nmf</a></code>. </p>
</dd>
<dt>nmf.equal</dt><dd><p><code>signature(x = "NMF", y =
  "NMFfitX")</code>: Compares two NMF models when at least one
comes from multiple NMF runs. </p>
</dd>
<dt>nneg</dt><dd><p><code>signature(object = "NMF")</code>: Apply
<code>nneg</code> to the basis matrix of an <code><a href="NMF-package.html">NMF</a></code>
object (i.e. <code>basis(object)</code>). All extra arguments
in <code>...</code> are passed to the method
<code>nneg,matrix</code>. </p>
</dd>
<dt>predict</dt><dd><p><code>signature(object = "NMF")</code>: Default
method for NMF models </p>
</dd>
<dt>profcor</dt><dd><p><code>signature(x = "NMF", y = "matrix")</code>:
Computes the correlations between the basis profiles of
<code>x</code> and the rows of <code>y</code>. </p>
</dd>
<dt>profcor</dt><dd><p><code>signature(x = "NMF", y = "NMF")</code>:
Computes the correlations between the basis profiles of
<code>x</code> and <code>y</code>. </p>
</dd>
<dt>profcor</dt><dd><p><code>signature(x = "NMF", y =
  "missing")</code>: Computes the correlations between the basis
profiles of <code>x</code>. </p>
</dd>
<dt>rmatrix</dt><dd><p><code>signature(x = "NMF")</code>: Returns the
target matrix estimate of the NMF model <code>x</code>,
perturbated by adding a random matrix generated using the
default method of <code>rmatrix</code>: it is a equivalent to
<code>fitted(x) + rmatrix(fitted(x), ...)</code>.
</p>
<p>This method can be used to generate random target
matrices that depart from a known NMF model to a
controlled extend. This is useful to test the robustness
of NMF algorithms to the presence of certain types of
noise in the data. </p>
</dd>
<dt>rnmf</dt><dd><p><code>signature(x = "NMF", target =
  "numeric")</code>: Generates a random NMF model of the same
class and rank as another NMF model.
</p>
<p>This is the workhorse method that is eventually called by
all other methods. It generates an NMF model of the same
class and rank as <code>x</code>, compatible with the
dimensions specified in <code>target</code>, that can be a
single or 2-length numeric vector, to specify a square or
rectangular target matrix respectively.
</p>
<p>See <code><a href="rnmf.html">rnmf,NMF,numeric-method</a></code> for more
details. </p>
</dd>
<dt>rnmf</dt><dd><p><code>signature(x = "NMF", target =
  "missing")</code>: Generates a random NMF model of the same
dimension as another NMF model.
</p>
<p>It is a shortcut for <code>rnmf(x, nrow(x), ncol(x),
  ...)</code>, which returns a random NMF model of the same class
and dimensions as <code>x</code>. </p>
</dd>
<dt>rposneg</dt><dd><p><code>signature(object = "NMF")</code>: Apply
<code>rposneg</code> to the basis matrix of an
<code><a href="NMF-package.html">NMF</a></code> object. </p>
</dd>
<dt>show</dt><dd><p><code>signature(object = "NMF")</code>: Show method
for objects of class <code>NMF</code> </p>
</dd>
<dt>sparseness</dt><dd><p><code>signature(x = "NMF")</code>: Compute
the sparseness of an object of class <code>NMF</code>, as the
sparseness of the basis and coefficient matrices computed
separately.
</p>
<p>It returns the two values in a numeric vector with names
&lsquo;basis&rsquo; and &lsquo;coef&rsquo;. </p>
</dd>
<dt>summary</dt><dd><p><code>signature(object = "NMF")</code>: Computes
summary measures for a single NMF model.
</p>
<p>The following measures are computed:
</p>
<p>See <code><a href="assess.html">summary,NMF-method</a></code> for more details. </p>
</dd>
</dl>



<h3>Implementing NMF models</h3>

<p>The class <code>NMF</code> only defines a basic data/low-level
interface for NMF models, as a collection of generic
methods, responsible with data handling, upon which
relies a comprehensive set of functions, composing a rich
higher-level interface.
</p>
<p>Actual NMF models are defined as sub-classes that
inherits from class <code>NMF</code>, and implement the
management of data storage, providing definitions for the
interface's pure virtual methods.
</p>
<p>The minimum requirement to define a new NMF model that
integrates into the framework of the <em>NMF</em> package
are the followings:
</p>

<ul>
<li><p> Define a class that inherits from class <code>NMF</code>
and implements the new model, say class <code>myNMF</code>.
</p>
</li>
<li><p> Implement the following S4 methods for the new
class <code>myNMF</code>: </p>

<dl>
<dt>fitted</dt><dd><p><code>signature(object = "myNMF", value =
  "matrix")</code>: Must return the estimated target matrix as
fitted by the NMF model <code>object</code>.  </p>
</dd>
<dt>basis</dt><dd><p><code>signature(object = "myNMF")</code>: Must
return the basis matrix(e.g. the first matrix factor in
the standard NMF model).  </p>
</dd>
<dt>basis&lt;-</dt><dd><p><code>signature(object = "myNMF", value =
  "matrix")</code>: Must return <code>object</code> with the basis
matrix set to <code>value</code>.  </p>
</dd>
<dt>coef</dt><dd><p><code>signature(object = "myNMF")</code>: Must
return the matrix of mixture coefficients (e.g. the
second matrix factor in the standard NMF model).  </p>
</dd>
<dt>coef&lt;-</dt><dd><p><code>signature(object = "myNMF", value =
  "matrix")</code>: Must return <code>object</code> with the matrix of
mixture coefficients set to <code>value</code>.  </p>
</dd> </dl>

<p>The <em>NMF</em> package provides &quot;pure virtual&quot;
definitions of these methods for class <code>NMF</code> (i.e.
with signatures <code>(object='NMF', ...)</code> and
<code>(object='NMF', value='matrix')</code>) that throw an
error if called, so as to force their definition for
model classes.
</p>
</li>
<li><p> Optionally, implement method
<code>rnmf</code>(signature(x=&quot;myNMF&quot;, target=&quot;ANY&quot;)). This
method should call <code>callNextMethod(x=x,
  target=target, ...)</code> and fill the returned NMF model with
its specific data suitable random values. </p>
</li></ul>

<p>For concrete examples of NMF models implementations, see
class <code><a href="NMFstd-class.html">NMFstd</a></code> and its extensions
(e.g. classes <code><a href="NMFOffset-class.html">NMFOffset</a></code> or
<code><a href="NMFns-class.html">NMFns</a></code>).
</p>


<h3>Creating NMF objects</h3>

<p>Strictly speaking, because class <code>NMF</code> is virtual,
no object of class <code>NMF</code> can be instantiated, only
objects from its sub-classes. However, those objects are
sometimes shortly referred in the documentation and
vignettes as &quot;<code>NMF</code> objects&quot; instead of &quot;objects
that inherits from class <code>NMF</code>&quot;.
</p>
<p>For built-in models or for models that inherit from the
standard model class <code><a href="NMFstd-class.html">NMFstd</a></code>, the
factory method <code>nmfModel</code> enables to easily create
valid <code>NMF</code> objects in a variety of common
situations. See documentation for the the factory method
<code><a href="nmfModel.html">nmfModel</a></code> for more details.
</p>


<h3>References</h3>

<p>Definition of Nonnegative Matrix Factorization in its
modern formulation: <cite>Lee et al. (1999)</cite>
</p>
<p>Historical first definition and algorithms: <cite>Paatero
et al. (1994)</cite>
</p>
<p>Lee DD and Seung HS (1999). &quot;Learning the parts of
objects by non-negative matrix factorization.&quot; _Nature_,
*401*(6755), pp. 788-91. ISSN 0028-0836, &lt;URL:
http://dx.doi.org/10.1038/44565&gt;, &lt;URL:
http://www.ncbi.nlm.nih.gov/pubmed/10548103&gt;.
</p>
<p>Paatero P and Tapper U (1994). &quot;Positive matrix
factorization: A non-negative factor model with optimal
utilization of error estimates of data values.&quot;
_Environmetrics_, *5*(2), pp. 111-126. &lt;URL:
http://dx.doi.org/10.1002/env.3170050203&gt;, &lt;URL:
http://www3.interscience.wiley.com/cgi-bin/abstract/113468839/ABSTRACT&gt;.
</p>


<h3>See Also</h3>

<p>Main interface to perform NMF in
<code><a href="nmf.html">nmf-methods</a></code>.
</p>
<p>Built-in NMF models and factory method in
<code><a href="nmfModel.html">nmfModel</a></code>.
</p>
<p>Method <code><a href="seed.html">seed</a></code> to set NMF objects with values
suitable to start algorithms with.
</p>
<p>Other NMF-interface: <code><a href="basis-coef-methods.html">basis</a></code>,
<code><a href="basis-coef-methods.html">.basis</a></code>, <code><a href="basis-coef-methods.html">.basis&lt;-</a></code>,
<code><a href="basis-coef-methods.html">basis&lt;-</a></code>, <code><a href="basis-coef-methods.html">coef</a></code>,
<code><a href="basis-coef-methods.html">.coef</a></code>, <code><a href="basis-coef-methods.html">.coef&lt;-</a></code>,
<code><a href="basis-coef-methods.html">coef&lt;-</a></code>, <code><a href="basis-coef-methods.html">coefficients</a></code>,
<code><a href="basis-coef-methods.html">loadings,NMF-method</a></code>,
<code><a href="nmfModel.html">nmfModel</a></code>, <code><a href="nmfModel.html">nmfModels</a></code>,
<code><a href="rnmf.html">rnmf</a></code>, <code><a href="basis-coef-methods.html">scoef</a></code>
</p>


<h3>Examples</h3>

<pre>


# show all the NMF models available (i.e. the classes that inherit from class NMF)
nmfModels()
# show all the built-in NMF models available
nmfModels(builtin.only=TRUE)

# class NMF is a virtual class so cannot be instantiated:
try( new('NMF') )

# To instantiate an NMF model, use the factory method nmfModel. see ?nmfModel
nmfModel()
nmfModel(3)
nmfModel(3, model='NMFns')
</pre>

<hr /><div style="text-align: center;">[Package <em>NMF</em> version 0.21.0 <a href="00Index.html">Index</a>]</div>
</body></html>
