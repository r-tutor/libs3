<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Sub-setting NMF Objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for [,NMF-method {NMF}"><tr><td>[,NMF-method {NMF}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Sub-setting NMF Objects</h2>

<h3>Description</h3>

<p>This method provides a convenient way of sub-setting
objects of class <code>NMF</code>, using a matrix-like syntax.
</p>
<p>It allows to consistently subset one or both matrix
factors in the NMF model, as well as retrieving part of
the basis components or part of the mixture coefficients
with a reduced amount of code.
</p>


<h3>Usage</h3>

<pre>
  ## S4 method for signature 'NMF'
x[i, j, ..., drop = FALSE]
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>i</code></td>
<td>
<p>index used to subset on the <strong>rows</strong> of the
basis matrix (i.e. the features). It can be a
<code>numeric</code>, <code>logical</code>, or <code>character</code>
vector (whose elements must match the row names of
<code>x</code>). In the case of a <code>logical</code> vector the
entries are recycled if necessary.</p>
</td></tr>
<tr valign="top"><td><code>j</code></td>
<td>
<p>index used to subset on the <strong>columns</strong> of
the mixture coefficient matrix (i.e. the samples). It can
be a <code>numeric</code>, <code>logical</code>, or <code>character</code>
vector (whose elements must match the column names of
<code>x</code>). In the case of a <code>logical</code> vector the
entries are recycled if necessary.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>used to specify a third index to subset on the
basis components, i.e. on both the columns and rows of
the basis matrix and mixture coefficient respectively. It
can be a <code>numeric</code>, <code>logical</code>, or
<code>character</code> vector (whose elements must match the
basis names of <code>x</code>). In the case of a <code>logical</code>
vector the entries are recycled if necessary.
</p>
<p>Note that only the first extra subset index is used. A
warning is thrown if more than one extra argument is
passed in <code>...</code>.</p>
</td></tr>
<tr valign="top"><td><code>drop</code></td>
<td>
<p>single <code>logical</code> value used to drop the
<code>NMF-class</code> wrapping and only return subsets of one
of the factor matrices (see <em>Details</em>)</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
<p> object from which to extract element(s) or in
which to replace element(s).  </p>
</td></tr>
</table>


<h3>Details</h3>

<p>The returned value depends on the number of subset index
passed and the value of argument <code>drop</code>:
</p>
 <ul>
<li><p> No index as in <code>x[]</code> or <code>x[,]</code>:
the value is the object <code>x</code> unchanged.
</p>
</li>
<li><p> One single index as in <code>x[i]</code>: the value is
the complete NMF model composed of the selected basis
components, subset by <code>i</code>, except if argument
<code>drop=TRUE</code>, or if it is missing and <code>i</code> is of
length 1. Then only the basis matrix is returned with
dropped dimensions: <code>x[i, drop=TRUE]</code> &lt;=&gt;
<code>drop(basis(x)[, i])</code>.
</p>
<p>This means for example that <code>x[1L]</code> is the first
basis vector, and <code>x[1:3, drop = TRUE]</code> is the
matrix composed of the 3 first basis vectors &ndash; in
columns.
</p>
<p>Note that in version &lt;= 0.18.3, the call <code>x[i, drop
  = TRUE.or.FALSE]</code> was equivalent to <code>basis(x)[, i,
  drop=TRUE.or.FALSE]</code>.
</p>
</li>
<li><p> More than one index with <code>drop=FALSE</code>
(default) as in <code>x[i,j]</code>, <code>x[i,]</code>,
<code>x[,j]</code>, <code>x[i,j,k]</code>, <code>x[i,,k]</code>, etc...:
the value is a <code>NMF</code> object whose basis and/or
mixture coefficient matrices have been subset
accordingly. The third index <code>k</code> affects
simultaneously the columns of the basis matrix AND the
rows of the mixture coefficient matrix. In this case
argument <code>drop</code> is not used.
</p>
</li>
<li><p> More than one index with <code>drop=TRUE</code> and
<code>i</code> xor <code>j</code> missing: the value returned is the
matrix that is the more affected by the subset index.
That is that <code>x[i, , drop=TRUE]</code> and <code>x[i, , k,
  drop=TRUE]</code> return the basis matrix subset by <code>[i,]</code>
and <code>[i,k]</code> respectively, while <code>x[, j,
  drop=TRUE]</code> and <code>x[, j, k, drop=TRUE]</code> return the
mixture coefficient matrix subset by <code>[,j]</code> and
<code>[k,j]</code> respectively.
</p>
</li></ul>



<h3>Examples</h3>

<pre>


# create a dummy NMF object that highlight the different way of subsetting
a &lt;- nmfModel(W=outer(seq(1,5),10^(0:2)), H=outer(10^(0:2),seq(-1,-10)))
basisnames(a) &lt;- paste('b', 1:nbasis(a), sep='')
rownames(a) &lt;- paste('f', 1:nrow(a), sep='')
colnames(a) &lt;- paste('s', 1:ncol(a), sep='')

# or alternatively:
# dimnames(a) &lt;- list( features=paste('f', 1:nrow(a), sep='')
#					, samples=paste('s', 1:ncol(a), sep='')
#					, basis=paste('b', 1:nbasis(a)) )

# look at the resulting NMF object
a
basis(a)
coef(a)

# extract basis components
a[1]
a[1, drop=FALSE] # not dropping matrix dimension
a[2:3]

# subset on the features
a[1,]
a[2:4,]
# dropping the NMF-class wrapping =&gt; return subset basis matrix
a[2:4,, drop=TRUE]

# subset on the samples
a[,1]
a[,2:4]
# dropping the NMF-class wrapping =&gt; return subset coef matrix
a[,2:4, drop=TRUE]

# subset on the basis =&gt; subsets simultaneously basis and coef matrix
a[,,1]
a[,,2:3]
a[4:5,,2:3]
a[4:5,,2:3, drop=TRUE] # return subset basis matrix
a[,4:5,2:3, drop=TRUE] # return subset coef matrix

# 'drop' has no effect here
a[,,2:3, drop=TRUE]
</pre>

<hr /><div style="text-align: center;">[Package <em>NMF</em> version 0.21.0 <a href="00Index.html">Index</a>]</div>
</body></html>
