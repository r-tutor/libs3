<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Convert to labelled data</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for to_labelled {labelled}"><tr><td>to_labelled {labelled}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Convert to labelled data</h2>

<h3>Description</h3>

<p>Convert a factor or data imported with <span class="pkg">foreign</span> or <span class="pkg">memisc</span> to labelled data.
</p>


<h3>Usage</h3>

<pre>
to_labelled(x, ...)

## S3 method for class 'data.frame'
to_labelled(x, ...)

## S3 method for class 'list'
to_labelled(x, ...)

## S3 method for class 'data.set'
to_labelled(x, ...)

## S3 method for class 'importer'
to_labelled(x, ...)

foreign_to_labelled(x)

memisc_to_labelled(x)

## S3 method for class 'factor'
to_labelled(x, labels = NULL, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>Factor or dataset to convert to labelled data frame</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr valign="top"><td><code>labels</code></td>
<td>
<p>When converting a factor only:
an optional named vector indicating how factor levels should be coded.
If a factor level is not found in <code>labels</code>, it will be converted to <code>NA</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>to_labelled</code> is a general wrapper calling the appropriate sub-functions.
</p>
<p><code>memisc_to_labelled</code> converts a <code><a href="../../memisc/html/data.set.html">data.set</a></code> object created with
<span class="pkg">memisc</span> package to a labelled data frame.
</p>
<p><code>foreign_to_labelled</code> converts data imported with <code><a href="../../foreign/html/read.spss.html">read.spss</a></code>
or <code><a href="../../foreign/html/read.dta.html">read.dta</a></code> from <span class="pkg">foreign</span> package to a labelled data frame,
i.e. using <code><a href="labelled.html">labelled</a></code> class.
Factors will not be converted. Therefore, you should use <code>use.value.labels = FALSE</code>
when importing with <code><a href="../../foreign/html/read.spss.html">read.spss</a></code> or <code>convert.factors = FALSE</code> when
importing with <code><a href="../../foreign/html/read.dta.html">read.dta</a></code>.
</p>
<p>To convert correctly defined missing values imported with <code><a href="../../foreign/html/read.spss.html">read.spss</a></code>, you should
have used <code>to.data.frame = FALSE</code> and <code>use.missings = FALSE</code>. If you used the option
<code>to.data.frame = TRUE</code>, meta data describing missing values will not be attached to the import.
If you used <code>use.missings = TRUE</code>, missing values would have been converted to <code>NA</code>.
</p>
<p>So far, missing values defined in Stata are always imported as <code>NA</code> by
<code><a href="../../foreign/html/read.dta.html">read.dta</a></code> and could not be retrieved by <code>foreign_to_labelled</code>.
</p>


<h3>Value</h3>

<p>A tbl data frame or a labelled vector.
</p>


<h3>See Also</h3>

<p><code><a href="labelled.html">labelled</a></code> (<span class="pkg">foreign</span>), <code><a href="../../foreign/html/read.spss.html">read.spss</a></code> (<span class="pkg">foreign</span>),
<code><a href="../../foreign/html/read.dta.html">read.dta</a></code> (<span class="pkg">foreign</span>), <code><a href="../../memisc/html/data.set.html">data.set</a></code> (<span class="pkg">memisc</span>),
<code><a href="../../memisc/html/importer.html">importer</a></code> (<span class="pkg">memisc</span>), <code><a href="to_factor.html">to_factor</a></code>.
</p>


<h3>Examples</h3>

<pre>
## Not run: 
  # from foreign
  library(foreign)
  sav &lt;- system.file("files", "electric.sav", package = "foreign")
  df &lt;- to_labelled(read.spss(
    sav,
    to.data.frame = FALSE,
    use.value.labels = FALSE,
    use.missings = FALSE
 ))

 # from memisc
 library(memisc)
 nes1948.por &lt;- UnZip('anes/NES1948.ZIP', 'NES1948.POR', package='memisc')
 nes1948 &lt;- spss.portable.file(nes1948.por)
 df &lt;- to_labelled(nes1948)
 ds &lt;- as.data.set(nes19480)
 df &lt;- to_labelled(ds)

## End(Not run)

# Converting factors to labelled vectors
f &lt;- factor(c("yes", "yes", "no", "no", "don't know", "no", "yes", "don't know"))
to_labelled(f)
to_labelled(f, c("yes" = 1, "no" = 2, "don't know" = 9))
to_labelled(f, c("yes" = 1, "no" = 2))
to_labelled(f, c("yes" = "Y", "no" = "N", "don't know" = "DK"))

s1 &lt;- labelled(c('M', 'M', 'F'), c(Male = 'M', Female = 'F'))
labels &lt;- val_labels(s1)
f1 &lt;- to_factor(s1)
f1

to_labelled(f1)
identical(s1, to_labelled(f1))
to_labelled(f1, labels)
identical(s1, to_labelled(f1, labels))
</pre>

<hr /><div style="text-align: center;">[Package <em>labelled</em> version 2.0.2 <a href="00Index.html">Index</a>]</div>
</body></html>
